function clearAdvancedSearch() { var e = $("#advsearchform input[name='storeID']").val(), a = $("#advsearchform input[name='categoryNValue']").val(), t = $("#advsearchform input[name='ntt']").val(), n = $("#advsearchform input[name='categoryNValue']").val(), o = $("#advsearchform input[name='nttSkuList']").val(), r = "", c = $("#advsearchform input[name='productstation']").val(), i = $("#advsearchform input[name='ntx']").val(), s = $("#advsearchform input[name='ntk']").val(), l = $("#advsearchform input[name='mystore']").val(); n = loadCategoryNValue, a = loadCategoryNValue, loadAdvancedSearch(e, a, t, n, o, "", r, !0, i, s, l, c) } function loadAdvancedSearchonClick() { var e = $("#advsearchform input[name='storeID']").val(), a = $("#advsearchform input[name='categoryNValue']").val(), t = "", n = $("#advsearchform input[name='ntt']").val(), o = $("#advsearchform input[name='ntx']").val(), r = $("#advsearchform input[name='ntk']").val(), c = $("#advsearchform input[name='mystore']").val(), i = $("#advsearchform input[name='productstation']").val(), s = ""; $("#advsearchform input[name='nValue']").each(function () { this.checked && (s.length > 0 && (s += ","), s += $(this).val()) }); var l = $("#advsearchform input[name='nttSkuList']").val(); $("#advsearchform input[name='prt']").each(function () { this.checked && (t = $(this).val()) }); var d = ""; $("#advsearchform input[name='categoryNValueRefinement']").each(function () { this.checked && (d.length > 0 && (d += ","), d += $(this).val()) }), d.length > 0 && (s = d != s && s.indexOf(d) <= 0 && s.length > 0 ? d + "," + s : d, a = d), loadAdvancedSearch(e, a, n, s, l, t, d, !0, o, r, c, i) } function loadAdvancedSearch(e, a, t, n, o, r, c, i, s, l, d, u) { i || (loadCategoryNValue = a), !i && $("#advancedSearch").is(":visible") || $.ajax({ type: "POST", url: "/assets/ajax/advancedsearch.aspx", data: "storeID=" + e + "&categoryNValue=" + a + "&ntt=" + t + "&NValue=" + n + "&nttSkuList=" + o + "&prt=" + r + "&categoryNValueRefinement=" + c + "&ntx=" + s + "&ntk=" + l + "&mystore=" + d + "&productstation=" + u, success: function (e) { e.length >= 6 ? ($("#Aria-Announcements").html('<div aria-live="polite" role="alert">Advanced search options opened.  Focusing on element now.</div>'), window.setTimeout(function () { $("#Aria-Announcements").html("") }, 5e3), $("#advancedSearch").html(e), $("#advancedSearch").show(), $("div.groupSelections").hide(), "" == currentGroupID && (currentGroupID = $(".groupName:first").attr("id")), "" != currentGroupID && ($("#group_" + currentGroupID).show(), $("#" + currentGroupID).addClass("on")), $(".groupName a").click(function (e) { $("div.groupSelections").hide(); var a = e.target.id.replace("_alink", ""); return currentGroupID = a, $("#group_" + a).show(), $(".groupName").removeClass("on"), $("#" + currentGroupID).addClass("on"), !1 }), $("#pnlAdvancedSearch .advDimVals").click(function () { loadAdvancedSearchonClick() }), $(".advDimValsOff").click(function (e) { e.preventDefault(), $(this).checked = !1 }), $("#advSearchClose").click(function () { $("#advancedSearch").hide() }), $("#advSearchClear").click(function () { clearAdvancedSearch() }), $("#advancedSearchAnnouncement").focus(), $("#advsearchform").submit(function () { var e = ($("#advsearchform input[name='storeID']").val(), $("#advsearchform input[name='categoryNValue']").val()), a = $("#advsearchform input[name='productstation']").val(), t = $("#advsearchform input[name='ntt']").val(), n = $("#advsearchform input[name='ntx']").val(), o = $("#advsearchform input[name='ntk']").val(), r = e; $("#advsearchform input[name='nValue']").each(function () { this.checked && (r.length > 0 && (r += "+"), r += $(this).val()) }); var c = $("#advsearchform input[name='nttSkuList']").val(), i = ""; $("#advsearchform input[name='prt']").each(function () { this.checked && (i = $(this).val()) }); var s = ($("#advsearchform input[name='categoryNValueRefinement']").val(), "/search/search_results.aspx"); "True" == a && (s = "/productstation/results.aspx"), null != c && "" != c && (t = ""); var l = s + "?N=" + r + "&Ntt=" + t + "&prt=" + i + "&sku_list=" + c + "&Ntx=" + n + "&Ntk=" + o; return window.location = l, !1 })) : $("#advancedSearch").hide() } }) } function fireGuidedTimeout() { if (timerActive) { try { clearTimeout(guidedNavTimeout) } catch (e) { } postGuidedForm(!1) } } function loadSearchResults(e) { $("#toTop").hide(); var a = readCookie("storeSelected"), t = e.replace("/search/search_results.aspx", "/endeca/AjaxResults.aspx"); t.toLowerCase().indexOf(a) <= 0 && (t = t + "&storeid=" + a), $.ajax({ type: "GET", url: t, success: function (a) { if (a.length >= 6) { window.setTimeout(function () { $("#Aria-Announcements").html('<div aria-live="polite"  role="alert">Main search content has been updated.</div>') }, 5e3), window.setTimeout(function () { $("#Aria-Announcements").html("") }, 15e3), $("#content").html(a); try { if ($(window).scrollTop() + 25 > $("#resultsBottom").offset().top) { var t = $(window).scrollTop() - $("#resultsBottom").offset().top + 50; $("#toTop").css({ top: t + "px" }), $("#toTop").fadeIn("slow") } } catch (n) { } bindAjaxClick(e); try { if (history.pushState) { if (e.toLowerCase().indexOf("mystore=") <= 0) { var o = readCookie("myStore"); e = e.indexOf("?") > 0 ? e + "&myStore=" + o : e + "?myStore=" + o } history.pushState(null, null, e) } } catch (n) { } } } }) } function bindAjaxClick(e) { $("#toTop a").click(function () { return $("html, body").animate({ scrollTop: $("#productGrid").offset().top }, 1e3), $("#toTop").hide("slow"), !1 }), $(".ajaxResults a.dimValLink").click(function () { $(".body-loading").css("display", "block"); try { loadSearchResults($(this).attr("href")) } catch (e) { $(".body-loading").css("display", "none") } return !1 }), $(".ajaxResults .refinements a").click(function () { $(".body-loading").css("display", "block"); try { loadSearchResults($(this).attr("href")) } catch (e) { $(".body-loading").css("display", "none") } return !1 }), $(".products .image").click(function () { productClick(this) }), $(".avProductClick").click(function () { productClick(this) }), $(".addOnProductClick").click(function () { addOnClick(this) }), $(".pDescription h2 a").click(function () { productClick(this) }), $(".SearchBannerProduct").click(function () { productClick(this) }), $(".RightBannerProduct").click(function () { productClick(this) }), $(".featureProduct").click(function () { productClick(this) }), $(".SearchTower").click(function () { promoClick(this) }), $(".SearchBanner").click(function () { promoClick(this) }), bindMore(), setGridView(), $(".inline-compare-text").html("Select 2 to compare"), $(".body-loading").css("display", "none"), setCompareFeatures(), doDataPush(e) } function doDataPush(url) { var productImpressions = ("}," + $("#productImpressions").html() + ",{").split("},{"), promoImpressions = ("}," + $("#promoImpressions").html() + ",{").split("},{"); if (productImpressions.splice(0, 1), promoImpressions.splice(0, 1), productImpressions.splice(productImpressions.length - 1, 1), promoImpressions.splice(promoImpressions.length - 1, 1), "undefined" != typeof ga) { for (var arrayLength = productImpressions.length, i = 0; arrayLength > i; i++) ga("mc.ec:addImpression", eval("({" + productImpressions[i] + "})")); for (arrayLength = promoImpressions.length, i = 0; arrayLength > i; i++) ga("mc.ec:addPromo", eval("({" + promoImpressions[i] + "})")); ga("mc.send", "pageview", { page: url, title: $(".seoPageTitle").html() }) } document.title = $(".seoPageTitle").html() } var currentGroupID = "", guidedNavTimeout, timerActive = !1, isAjax = !1; $(document).ready(function () { try { history.pushState && ($(".ajaxResults .guided a.dimValLink").click(function () { $(".body-loading").css("display", "block"); try { loadSearchResults($(this).attr("href")) } catch (e) { $(".body-loading").css("display", "none") } return !1 }), $(".dimGuided a.dimValLink").click(function () { $(".body-loading").css("display", "block"); try { loadSearchResults($(this).attr("href")) } catch (e) { $(".body-loading").css("display", "none") } return !1 }), $(".ajaxResults .refinements a").click(function () { $(".body-loading").css("display", "block"); try { loadSearchResults($(this).attr("href")) } catch (e) { $(".body-loading").css("display", "none") } return !1 }), window.addEventListener("popstate", function (e) { location.href.indexOf("/search/search_results.aspx") > 0 ? ($(".body-loading").css("display", "block"), $.ajax({ url: location.href.replace("/search/search_results.aspx", "/endeca/AjaxResults.aspx"), success: function (e) { $("#content").html(e), bindAjaxClick(location.pathname) } })) : location.href.indexOf("/category/") > 0 && ($(".body-loading").css("display", "block"), $.ajax({ url: location.href.replace("/category/", "/ajaxcategory/"), success: function (e) { $("#content").html(e), bindAjaxClick(location.pathname) } })) })) } catch (e) { } }); var loadCategoryNValue = String().Empty;